supported_targets = [
  "raspberrypi5",
  "raspberrypi4",
  "reterminal",
  "reterminal-dm"
]

src_dir = "../../"

##
## Runtimes
##

[runtime.webkit-ui.dependencies]
avocado-img-bootfiles = "*"
avocado-img-rootfs = "*"
avocado-img-initramfs = "*"
avocado-ext-dev = { ext = "avocado-ext-dev", config = "extensions/dev/avocado.toml" }
avocado-ext-webkit = { ext = "avocado-ext-webkit", config = "extensions/webkit/avocado.toml" }
avocado-ext-docker = { ext = "avocado-ext-docker", config = "extensions/docker/avocado.toml" }
config = { ext = "config" }
app = { ext = "app" }

[runtime.webkit-ui.reterminal-dm.dependencies]
avocado-bsp-reterminal-dm = { ext = "avocado-bsp-reterminal-dm", config = "bsp/reterminal-dm/avocado.toml" }

[runtime.webkit-ui.reterminal.dependencies]
avocado-bsp-reterminal = { ext = "avocado-bsp-reterminal", config = "bsp/reterminal/avocado.toml" }

[runtime.webkit-ui.raspberrypi5.dependencies]
avocado-bsp-raspberrypi5 = { ext = "avocado-bsp-raspberrypi5", config = "bsp/raspberrypi5/avocado.toml" }

[runtime.webkit-ui.raspberrypi4.dependencies]
avocado-bsp-raspberrypi4 = { ext = "avocado-bsp-raspberrypi4", config = "bsp/raspberrypi4/avocado.toml" }

##
## Extensions
##

[ext.app]
types = ["sysext", "confext"]

[ext.app.dependencies]
libdrm-tests = "*"
curl = "*"
iperf3 = "*"


[ext.config]
types = ["confext"]

[ext.config.users.root]
password = ""

##
## SDK
##

[sdk]
image = "avocadolinux/sdk:apollo-edge"
container_args = ["--network=host"]

##
## Provisioning
##

[provision.usb]
container_args = ["-v", "/dev:/dev", "-v", "/sys:/sys:ro", "--privileged"]

[provision.sd]
container_args = ["-v", "/dev:/dev", "-v", "/sys:/sys:ro", "--privileged"]
